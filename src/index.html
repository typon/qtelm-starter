<!DOCTYPE html>
<html lang "en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script type="text/javascript" src="./main.js"></script>
    <link rel="stylesheet" href="style.css">
    <title>REEE</title>
</head>

<body>
    <div id="console"></div>
</body>

<script type="text/javascript">
    function js_print(lang, event, msg) {
        msg = "<b class=" + lang + ">" + lang + ": " + event + ":</b> " + msg;
        console = document.getElementById("console")
        console.innerHTML += "<div class=msg>" + msg + "</div>";
    }


    window.onload = function() {
        // var storedState = localStorage.getItem('elmctron');
        // var startingState = storedState ? JSON.parse(storedState) : null;
        var elmctron = Elm.Todo.fullscreen(null);
        elmctron.ports.focus.subscribe(function(selector) {
            setTimeout(function() {
                var nodes = document.querySelectorAll(selector);
                if (nodes.length === 1 && document.activeElement !== nodes[0]) {
                    nodes[0].focus();
                }
            }, 50);
        });
        elmctron.ports.setStorage.subscribe(function(state) {;
            console.log(state);
            //localStorage.setItem('elmctron', JSON.stringify(state));
        });
    };
</script>

</html>
